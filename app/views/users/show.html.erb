
<div class="container mx-auto pl-10">
  <h2 class="text-2xl font-bold mb-6 border-b pb-2">マイページ</h2>

  <div class="mb-6 max-w-md bg-white p-6 rounded shadow">
    <p class="mb-2"><strong class="font-semibold">名前:</strong> <span class="text-gray-800"><%= @user.name %></span></p>
    <p class="mb-4"><strong class="font-semibold">メールアドレス:</strong> <span class="text-gray-800"><%= @user.email %></span></p>
    <% unless current_user.provider == "google_oauth2" %>
      <div class="text-right">
        <%= link_to "アカウント設定", edit_user_registration_path, class: "text-blue-600 hover:underline font-semibold" %>
      </div>
    <% end %>

  <h3 class="text-xl font-semibold mb-4 border-b pb-2">投稿したレビュー</h3>

  <% @reviews.each do |review| %>
    <div class="border border-gray-300 p-5 mb-6 rounded-lg shadow bg-white max-w-3xl">
      <p class="text-sm text-gray-500 mb-2"><%= review.created_at.strftime("%Y/%m/%d %H:%M") %></p>

      <h4 class="text-lg font-bold mb-3">
        <%= link_to review.shop_name, shop_detail_path(review.shop_place_id), class: "text-blue-600 hover:underline" %>
      </h4>

      <div class="mb-3 space-x-4 text-gray-700 font-medium">
        <span>総合: ★<%= review.rating_overall %></span>
        <span>技術: ★<%= review.rating_skill %></span>
        <span>接客: ★<%= review.rating_service %></span>
        <span>金額: ★<%= review.rating_price %></span>
      </div>

      <p class="mb-4 text-gray-800 whitespace-pre-wrap"><%= review.comment.presence || "（コメントなし）" %></p>

      <% if review.tags.present? %>
        <div class="text-sm text-gray-700 mb-4">
          タグ:
          <% review.tags.each do |tag| %>
            <span class="inline-block bg-gray-200 text-gray-800 px-3 py-1 rounded-full mr-2 mb-1"><%= tag.name %></span>
          <% end %>
        </div>
      <% end %>

      <div class="flex space-x-6 text-sm">
        <%= link_to "編集", edit_review_path(review), class: "text-blue-600 hover:underline font-semibold" %>
        <%= link_to "削除", review_path(review), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "text-red-600 hover:underline font-semibold" %>
      </div>
    </div>
  <% end %>

  <div class="mt-8 text-center">
    <%= link_to '戻る', root_path, class: "text-blue-600 underline font-semibold" %>
  </div>
</div>
