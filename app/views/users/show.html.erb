<div class="container mx-auto px-4 sm:px-6 lg:px-10 py-8">
  <!-- マイページタイトル -->
  <h2 class="text-2xl font-bold mb-6 border-b pb-2">マイページ</h2>

  <!-- ユーザー情報カード -->
  <div class="mb-8 bg-white p-6 rounded-lg shadow-lg max-w-3xl mx-auto">
    <p class="mb-2"><strong class="font-semibold">名前:</strong> <span class="text-gray-800"><%= @user.name %></span></p>
    <p class="mb-4"><strong class="font-semibold">メールアドレス:</strong> <span class="text-gray-800"><%= @user.email %></span></p>
    
    <% unless current_user.provider == "google_oauth2" %>
      <div class="text-right">
        <%= link_to "アカウント設定", edit_user_registration_path, class: "text-blue-600 hover:underline font-semibold" %>
      </div>
    <% end %>
  </div>

  <!-- 投稿レビューセクション -->
  <h3 class="text-xl font-semibold mb-4 border-b pb-2">投稿したレビュー</h3>

  <% @reviews.each do |review| %>
    <div class="border border-gray-300 p-5 mb-6 rounded-lg shadow-lg bg-white max-w-3xl mx-auto">
      <!-- 日付 -->
      <p class="text-sm text-gray-500 mb-2"><%= review.created_at.strftime("%Y/%m/%d %H:%M") %></p>

      <!-- 店舗名 -->
      <h4 class="text-lg font-bold mb-3">
        <%= link_to review.shop_name, shop_detail_path(review.shop_place_id), class: "text-blue-600 hover:underline" %>
      </h4>

      <!-- 評価 -->
      <div class="mb-3 space-x-4 text-gray-700 font-medium">
        <span>総合: ★<%= review.rating_overall %></span>
        <span>技術: ★<%= review.rating_skill %></span>
        <span>接客: ★<%= review.rating_service %></span>
        <span>金額: ★<%= review.rating_price %></span>
      </div>

      <!-- コメント -->
      <p class="mb-4 text-gray-800 whitespace-pre-wrap"><%= review.comment.presence || "（コメントなし）" %></p>

      <!-- タグ -->
      <% if review.tags.present? %>
        <div class="text-sm text-gray-700 mb-4 flex flex-wrap gap-2">
          <% review.tags.each do |tag| %>
            <span class="inline-block bg-gray-200 text-gray-800 px-3 py-1 rounded-full"><%= tag.name %></span>
          <% end %>
        </div>
      <% end %>

      <!-- 編集・削除リンク -->
      <div class="flex flex-wrap gap-6 text-sm">
        <%= link_to "編集", edit_review_path(review, redirect_to: request.fullpath), class: "text-blue-600 hover:underline font-semibold" %>
        <%= link_to "削除", review_path(review), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "text-red-600 hover:underline font-semibold" %>
      </div>
    </div>
  <% end %>
</div>

<div class="flex justify-center space-x-4 text-sm mt-4">
  <%= link_to 'トップに戻る', root_path,
      class: "px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 font-semibold hover:bg-gray-200 transition" %>
</div>